<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Wiki RP — Hub principal" />
  <title>Wiki RP — Grimoire</title>
  <style>
    :root {
      --bg: #14110f;
      --ink: #e6d7b8;
      --ink-muted: #b8ab8a;
      --panel: #1d1916;
      --accent: #a38347;
      --danger: #b35a3e;
      --ring: rgba(163,131,71,.35);
      --shadow: rgba(0,0,0,.45);
      --font: ui-serif, Georgia, Cambria, "Times New Roman", serif;
    }
    html, body { height: 100%; margin: 0; }
    body {
      display: flex; flex-direction: column; align-items: center;
      background: radial-gradient(circle at 50% 40%, #1d1916 0%, #14110f 100%);
      color: var(--ink); font-family: var(--font);
      padding: 1rem;
    }
    header {
      text-align: center; margin: 1.5rem 0;
    }
    header h1 { margin: 0; font-size: 1.8rem; }
    nav {
      display: flex; flex-wrap: wrap; justify-content: center;
      gap: .75rem; margin: 1rem 0;
    }
    nav a {
      text-decoration: none;
      background: var(--panel);
      padding: .6rem 1rem;
      border-radius: 8px;
      color: var(--ink);
      border: 1px solid rgba(255,255,255,.08);
      transition: background .15s ease;
    }
    nav a:hover { background: var(--accent); color: #120f0b; }

    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: .5rem;
      margin-bottom: 1rem;
    }
    .filters button {
      background: var(--panel);
      color: var(--ink);
      border: 1px solid rgba(255,255,255,.1);
      padding: .5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background .15s ease;
    }
    .filters button:hover {
      background: var(--accent);
      color: #120f0b;
    }
    .filters button.active {
      background: var(--accent);
      color: #120f0b;
      font-weight: bold;
    }

    .search {
      margin: 1rem 0 1rem;
      width: min(90vw, 400px);
    }
    .search input {
      width: 100%; padding: .8rem .9rem;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.1);
      background: #14110f;
      color: var(--ink);
    }
    .search input:focus{
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--ring);
      outline: none;
    }
    .results {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
      width: 100%;
      max-width: 900px;
    }
    .card {
      display: block;
      background: var(--panel);
      border-radius: 10px;
      padding: 1rem;
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: 0 3px 6px var(--shadow);
      transition: transform .1s ease;
      color: var(--ink);
      text-decoration: none;
    }
    .card:hover { transform: translateY(-2px); }
    .card h3 { margin: 0 0 .5rem; font-size: 1.2rem; color: var(--ink); }
    .card p { margin: 0; color: var(--ink-muted); font-size: .95rem; }

    footer {
      margin: 2rem 0 1rem;
      font-size: .85rem;
      opacity: .75;
    }
  </style>
</head>
<body>
  <header>
    <h1>Grimoire d’Andoria</h1>
    <p>Hub principal du monde RP</p>
  </header>

<div class="filters">
  <button data-filter="All" class="active">Tous</button>
  <button data-filter="Personnages">Personnages</button>
  <button data-filter="Territoires">Territoires</button>
  <button data-filter="Factions">Factions</button>
  <button data-filter="Pays">Pays</button>
  <button data-filter="Archives">Archives</button>
</div>

  <div class="search">
    <input id="searchInput" type="text" placeholder="Rechercher..." />
  </div>

  <section class="results" id="results"></section>

  <footer>© Project Andoria</footer>

  <script>
    if(localStorage.getItem('rp_authed') !== '1'){
      location.href = "index.html";
    }

const WIKI_PAGES = [
  { title: "Andoria", category: "Pays", desc: "Andoria, centre impérial d’Eryndor, impose par magie.", url: "pays/andoria.html" },
  { title: "Lumora", category: "Pays", desc: "Île fermée, théâtre du coup d’État de 854.", url: "pays/lumora.html" },

  { title: "Ordre du Silence", category: "Factions", desc: "Mages sans nom, l’Ordre du Silence efface sans bruit.", url: "factions/ordre-du-silence.html" },

  { title: "Yuki Akanee", category: "Personnages", desc: "Yuki, en exil, cherche sa sœur après un coup d'État.", url: "personnages/yuki-akanee.html" },
  { title: "Yuna Akanee", category: "Personnages", desc: "Sœur jumelle de Yuki, recherchée activement.", url: "personnages/yuna-akanee.html" },
  { title: "Yuta Akanee", category: "Personnages", desc: "Frère aîné, manipulé par Kuroda, devenu assassin.", url: "personnages/yuta-akanee.html" },
  { title: "Aya Akanee", category: "Personnages", desc: "Mère de Yuki, tuée en tentant de fuir Lumora.", url: "personnages/aya-akanee.html" },
  { title: "Kuroda Nahoru", category: "Personnages", desc: "Dirigeant corrompu de Lumora, instigateur du coup d’État.", url: "personnages/kuroda-nahoru.html" },
  { title: "Takeshi Nahoru", category: "Personnages", desc: "Ancien dirigeant de Lumora, mort en 854.", url: "personnages/takeshi-nahoru.html" },
  { title: "Ezekiel Noctharis", category: "Personnages", desc: "Forgeron mystique, mentor de Yuki dans la forêt.", url: "personnages/ezekiel-noctharis.html" },
  { title: "Iris Veyra", category: "Personnages", desc: "Compagne de Yuki, mère de Caleb, vit à Brumeval.", url: "personnages/iris-veyra.html" },
  { title: "Caleb Akanee", category: "Personnages", desc: "Fils de Yuki et Iris, né en 861.", url: "personnages/caleb-akanee.html" },
  { title: "Brumeval", category: "Territoires", desc: "Village paisible où Yuki fonde sa famille.", url: "territoires/brumeval.html" },
  { title: "Forêt des Brises-Claires", category: "Territoires", desc: "Refuge d’Ezekiel, lieu d’entraînement de Yuki.", url: "territoires/brises-claires.html" },
  { title: "Coup d’État de Lumora", category: "Archives", desc: "[Événement] Renversement de Takeshi Nahoru en 854.", url: "archives/coup-etat-lumora.html" },
  { title: "Fuite des Akanee", category: "Archives", desc: "[Événement] Aya tente de fuir Lumora avec Yuki et Yuna.", url: "archives/fuite-akanee.html" },
  { title: "Mort de Aya Akanee", category: "Archives", desc: "[Événement] Tuée par Yuta lors de l’exil.", url: "archives/mort-aya.html" },
  { title: "Rencontre avec Ezekiel", category: "Archives", desc: "[Événement] Yuki est recueilli et formé dans la forêt.", url: "archives/rencontre-ezekiel.html" },
  { title: "Mariage de Yuki", category: "Archives", desc: "[Événement] Union avec Iris Veyra à Brumeval.", url: "archives/mariage-yuki.html" },
  { title: "Naissance de Caleb", category: "Archives", desc: "[Événement] Fils de Yuki et Iris, né en 861.", url: "archives/naissance-caleb.html" },
  { title: "Attaque de Brumeval", category: "Archives", desc: "[Événement] Village attaqué, Yuki défend les habitants.", url: "archives/attaque-brumeval.html" }
];

    const resultsEl = document.getElementById('results');
    const searchEl = document.getElementById('searchInput');
    const filterButtons = document.querySelectorAll('.filters button');

    function renderResults(list){
      resultsEl.innerHTML = "";
      list.forEach(p=>{
        const card = document.createElement('a');
        card.href = p.url;
        card.className = "card";
        card.innerHTML = `<h3>${p.title}</h3><p>${p.category} — ${p.desc}</p>`;
        resultsEl.appendChild(card);
      });
    }

    function filterResults(query){
      const q = query.toLowerCase();
      const filtered = WIKI_PAGES.filter(p =>
        p.title.toLowerCase().includes(q) ||
        p.category.toLowerCase().includes(q) ||
        p.desc.toLowerCase().includes(q)
      );
      renderResults(filtered);
    }

    renderResults(WIKI_PAGES);

    searchEl.addEventListener('input', () => {
      filterResults(searchEl.value);
      clearActiveFilter();
    });

    // Tri par catégorie via les boutons
    filterButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        const filter = btn.getAttribute('data-filter');
        searchEl.value = "";
        clearActiveFilter();
        btn.classList.add('active');
        if (filter === "All") {
          renderResults(WIKI_PAGES);
        } else {
          const filtered = WIKI_PAGES.filter(p => p.category === filter);
          renderResults(filtered);
        }
      });
    });

    function clearActiveFilter() {
      filterButtons.forEach(b => b.classList.remove('active'));
    }
  </script>
</body>
</html>
